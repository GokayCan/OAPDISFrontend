<div class="grid p-fluid">
    <p-toast></p-toast>
    <div class="col-12 md:col-12">
        <div class="card">
            <div class="card-header">
                <h2>
                    Profil Sayfası
                </h2>
            </div>
            <p-steps [model]="items" [readonly]="false" [activeIndex]="activeIndex"
                (activeIndexChange)="onActiveIndexChange($event)"></p-steps>
            <div *ngIf="activeIndex==0">
                <form #profileForm="ngForm">
                    <div class="card-body">
                        <div class="row mb-2">
                            <label for="txtName">Adı</label>
                            <input type="text" pInputText name="txtName" [(ngModel)]="data.firstName" #txtName="ngModel"
                                required>
                        </div>
                        <div class="row mb-2">
                            <label for="txtLastName">Soyad</label>
                            <input type="text" pInputText name="txtLastName" [(ngModel)]="data.lastName"
                                #txtLastName="ngModel" required>
                        </div>
                        <div class="row mb-2">
                            <label for="txtMailAddress">Mail Adresi</label>
                            <input type="text" pInputText name="txtMailAddress" [(ngModel)]="data.email"
                                #txtMailAddress="ngModel" required>
                        </div>
                        <div class="row mb-2">
                            <label for="txtPhoneNumber">Telefon Numarası</label>
                            <input type="text" pInputText name="txtPhoneNumber" [(ngModel)]="data.phoneNumber"
                                #txtPhoneNumber="ngModel" required>
                        </div>
                        <div class="row mb-2">
                            <label for="txtTask">Görev</label>
                            <input type="text" pInputText name="txtTask" [(ngModel)]="data.task" #txtTask="ngModel"
                                required>
                        </div>
                        <div class="row mb-2">
                            <label for="txtTitle">Ünvan</label>
                            <input type="text" pInputText name="txtTitle" [(ngModel)]="data.title" #txtTitle="ngModel"
                                required>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="my-2" style="display: flex;justify-content: end;">
                            <p-button label="Kaydet" icon="pi pi-save" styleClass="p-button-success"
                                (click)="updatePersonalInformation()" [loading]="loading" [disabled]="!profileForm.form.valid"></p-button>
                        </div>
                    </div>
                </form>
            </div>
            <div *ngIf="activeIndex==1">
                <div class="card-body">
                    <form #passwordForm="ngForm">
                        <div class="row mb-2">
                            <label for="">Mevcut Şifre</label>
                            <input type="text" pInputText name="txtPassword" [(ngModel)]="data.password"
                                #txtPassword="ngModel" required>
                        </div>
                        <div class="row mb-2">
                            <label for="">Yeni Şifre</label>
                            <p-password name="txtNewPassword" #txtNewPassword="ngModel" [(ngModel)]="newPassword"
                                [required]="true">
                                <ng-template pTemplate="header">
                                    <h6>Şifre Belirleyin</h6>
                                </ng-template>
                                <ng-template pTemplate="footer">
                                    <p-divider></p-divider>
                                    <p class="mt-2">Şartlar</p>
                                    <ul class="pl-2 ml-2 mt-0" style="line-height: 1.5">
                                        <li>En az 1 tane küçük harf</li>
                                        <li>En az 1 tane büyük harf</li>
                                        <li>En az 1 tane rakam</li>
                                        <li>Minimum 8 harf</li>
                                    </ul>
                                </ng-template>
                            </p-password>
                        </div>
                        <div class="row mb-2">
                            <label for="">Yeni Şifre Tekrar</label>
                            <p-password name="txtAgainNewPassword" #txtAgainNewPassword="ngModel"
                                [(ngModel)]="newPasswordConfirm" [required]="true">
                                <ng-template pTemplate="header">
                                    <h6>Yeni Şifreniz Tekrar</h6>
                                </ng-template>
                                <ng-template pTemplate="footer">
                                    <p-divider></p-divider>
                                    <p class="mt-2">Şartlar</p>
                                    <ul class="pl-2 ml-2 mt-0" style="line-height: 1.5">
                                        <li>En az 1 tane küçük harf</li>
                                        <li>En az 1 tane büyük harf</li>
                                        <li>En az 1 tane rakam</li>
                                        <li>Minimum 8 karakter</li>
                                    </ul>
                                </ng-template>
                            </p-password>
                        </div>
                    </form>
                </div>
                <div class="card-footer">
                    <div class="my-2" style="display: flex;justify-content: end;">
                        <p-button label="Kaydet" icon="pi pi-save" [loading]="loading" styleClass="p-button-success"
                            (click)="updatePassword()"></p-button>
                    </div>
                </div>
            </div>
            <div *ngIf="activeIndex==2">
                <div class="card-body">
                    <div class="grid col-12">
                        <div class="col-6">
                            <p-image src="assets/images/{{data.imageUrl}}" alt="Image" width="250"
                                [preview]="true"></p-image>
                        </div>
                        <div class="col-6">
                            <label for="">Profil Fotoğrafı</label>
                            <p-fileUpload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php"
                                (onSelect)="onUpload($event)" [multiple]="false" accept="image/*"
                                [maxFileSize]="10000000" [showUploadButton]="false" [chooseLabel]="'Resim Seç'"
                                [cancelLabel]="'İptal'" (onClear)="onClear()" (onRemove)="onClear()">
                                aria-describedby="txtFile-help">
                            </p-fileUpload>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="my-2" style="display: flex;justify-content: end;">
                        <p-button label="Kaydet" icon="pi pi-save" styleClass="p-button-success"
                            (click)="updatePhoto()" [disabled]="image == undefined" [loading]="loading"></p-button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
