<div class="grid p-fluid">
    <p-toast></p-toast>
    <div class="col-12 md:col-12">
        <div class="card">
            <div class="card-header">
                <h2>
                    Makele Form
                </h2>
            </div>
            <form #teacherArticleForm="ngForm">
                <div class="card-body">
                    <div class="row mb-2">
                        <label for="">Adı</label>
                        <input type="text" pInputText name="txtName" [(ngModel)]="data.title" #txtName="ngModel"
                            aria-describedby="txtName-help" required>
                        <small *ngIf="txtName.invalid && (txtName.dirty || txtName.touched)" id="txtName-help"
                            class="p-error">Makale Başlığı Boş Geçilemez.</small>
                    </div>
                    <div class="row mb-2">
                        <label for="">Açıklama</label>
                        <textarea rows="5" cols="30" pInputTextarea [(ngModel)]="data.description" name="txtDescription"
                            aria-describedby="txtDescription-help" #txtDescription="ngModel" required></textarea>
                        <small *ngIf="txtDescription.invalid && (txtDescription.dirty || txtDescription.touched)"
                            id="txtDescription-help" class="p-error">Makale Açıklaması Boş Geçilemez.</small>
                    </div>
                    <div class="row mb-2">
                        <label for="">Tarih</label>
                        <p-calendar [dateFormat]="'dd-mm-yy'" name="txtDate" [(ngModel)]="date" #txtDate="ngModel"
                            [hourFormat]="24" [showTime]="true" aria-describedby="txtDate-help" required></p-calendar>
                        <small *ngIf="txtDate.invalid && (txtDate.dirty || txtDate.touched)" id="txtDate-help"
                            class="p-error">Makale Tarihi Boş Geçilemez.</small>
                    </div>
                    <div *ngIf="this.id != undefined" class="row mb-2">
                        <h3>Önceki Fotoğraf</h3>
                        <img [src]="'assets/articles/' + data.fileUrl" alt="Makale Foto" width="300">
                    </div>
                    <div class="row mb-2">
                        <label for="">Makale Fotoğrafı</label>
                        <p-fileUpload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php"
                            (onSelect)="onUpload($event)" [multiple]="false" accept="image/*" [maxFileSize]="10000000"
                            [showUploadButton]="false" [chooseLabel]="'Resim Seç'" [cancelLabel]="'İptal'"
                            (onClear)="onClear()" (onRemove)="onClear()">
                            aria-describedby="txtFile-help">
                        </p-fileUpload>
                        <small *ngIf="file == undefined && this.id == undefined" id="txtFile-help"
                            class="p-error">Makale Dosyası Boş
                            Geçilemez.</small>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="my-2" style="display: flex;justify-content: end;">
                        <p-button *ngIf="this.id != undefined" label="Kaydet" icon="pi pi-save"
                            styleClass="p-button-success" [loading]="loading"
                            [disabled]="!teacherArticleForm.form.valid" (click)="save()"></p-button>
                        <p-button *ngIf="this.id == undefined" label="Kaydet" icon="pi pi-save"
                            styleClass="p-button-success" [loading]="loading"
                            [disabled]="!teacherArticleForm.form.valid || file==undefined" (click)="save()"></p-button>
                    </div>
                </div>
            </form>
        </div>
    </div>